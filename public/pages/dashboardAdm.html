<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="../style/dashboardAdm.css">
  <title>Dashboard - CatJournal</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

</head>

<body>

  <div class="container">
    <aside class="sidebar">
      <div class="sidebar-top">
        <img class="logo-img" src="../img/logo.svg" alt="logo-cat-journal">
        <h1>CatJournal</h1>
      </div>

      <nav class="nav-sidebar">
        <ul>
          <li><a class="fixar" id="perfil_li" href="../pages/perfilUsuario.html">Perfil</a></li>
          <li><a href="#">Feed</a></li>
          <li><a href="#">Quiz</a></li>
          <li><a href="#">Dashboard</a></li>
          <li id="admin_manager"><a href="../pages/gestaoUsuarios.html">Gestão de usuários</a></li>

        </ul>
      </nav>

      <button class="button-sair" onclick="window.location.href='./HomePage.html'">
        <i class="fa-solid fa-right-from-bracket" style="color: #c2185b;"></i> Sair
      </button>

      <p class="reserved">© 2024 CatJournal. Todos os direitos reservados.</p>
    </aside>

    <main class="content">
      <div class="header">
        <h1>Dashboard</h1>
        <p style="color:#8b8b8b;margin-top:6px">Visão geral das principais métricas</p>
      </div>


      <section class="kpi-row">
        <div class="kpi">
          <h3>Total de Usuários</h3>
          <p id="kpiUsuarios">--</p>
        </div>

        <div class="kpi">
          <h3>Homens x Mulheres</h3>
          <p id="kpiSexo">--</p>
        </div>

        <div class="kpi">
          <h3>Média de Idade</h3>
          <p id="kpiIdade">--</p>
        </div>

        <div class="kpi">
          <h3>Total de Gatos</h3>
          <p id="kpiGatos">--</p>
        </div>
      </section>

      <section class="graficos">
        <div class="graf-card">
          <h2>Evolução - Total de Usuários</h2>
          <canvas id="graficoUsuarios"></canvas>
        </div>

        <div class="graf-card">
          <h2>Homens x Mulheres </h2>
          <canvas id="graficoSexo"></canvas>
        </div>

        <div class="graf-card">
          <h2>Gatos por Usuário </h2>
          <canvas id="graficoGatos"></canvas>
        </div>

        <div class="graf-card">
          <h2>Média de Idade </h2>
          <canvas id="graficoIdade"></canvas>
        </div>
      </section>
    </main>
  </div>

  <script>
    window.onload = () => {
      const $ = (id) => window[id];

      const usuariosPorMes = [10, 20, 25, 40, 50, 60, 80, 95, 110, 128];
      const meses = ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out"];
      const totalHomens = 21;
      const totalMulheres = 107;
      const nomesUsuariosEx = ["Ana", "Bianca", "Carla", "Diego", "Edu", "Fabi", "Gabi"];
      const gatosPorUsuarioEx = [1, 3, 2, 4, 1, 2, 1];
      const mediaIdadeMes = [23, 24, 22, 25, 24, 26, 26, 27, 26, 27];
      const totalUsuarios = usuariosPorMes[usuariosPorMes.length - 1];

      let somaGatos = 0;
      for (const quantidade of gatosPorUsuarioEx) {
        somaGatos += quantidade;
      }

    
      let somaIdades = 0;
      for (const idade of mediaIdadeMes) {
        somaIdades += idade;
      }
      const mediaIdade = Math.round(somaIdades / mediaIdadeMes.length);

      kpiUsuarios.innerText = totalUsuarios;
      kpiSexo.innerText = `${totalHomens} / ${totalMulheres}`;
      kpiIdade.innerText = `${mediaIdade} anos`;
      kpiGatos.innerText = somaGatos;

      const rosaEscuro = '#c20459';
      const rosaClaro = '#ec91b7';

    
      new Chart(graficoUsuarios.getContext('2d'), {
        type: 'line',
        data: {
          labels: meses,
          datasets: [{
            label: 'Total de usuários',
            data: usuariosPorMes,
            borderColor: rosaEscuro,
            backgroundColor: 'rgba(194,4,89,0.12)',
            borderWidth: 3,
            tension: 0.3,
            pointRadius: 4
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#444' }, grid: { display: false } },
            y: { ticks: { color: '#444' }, grid: { color: '#fde6ee' } }
          }
        }
      });

  
      new Chart(graficoSexo.getContext('2d'), {
        type: 'bar',
        data: {
          labels: ['Homens', 'Mulheres'],
          datasets: [{
            data: [totalHomens, totalMulheres],
            backgroundColor: [rosaClaro, rosaEscuro],
            borderRadius: 8,
            maxBarThickness: 50
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#444' }, grid: { display: false } },
            y: { ticks: { color: '#444' }, grid: { color: '#fde6ee' }, beginAtZero: true }
          }
        }
      });

  
      new Chart(graficoGatos.getContext('2d'), {
        type: 'bar',
        data: {
          labels: nomesUsuariosEx,
          datasets: [{
            label: 'Qtd de gatos',
            data: gatosPorUsuarioEx,
            backgroundColor: rosaClaro,
            borderColor: rosaEscuro,
            borderWidth: 2,
            borderRadius: 8
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#444' }, grid: { display: false } },
            y: { ticks: { color: '#444' }, grid: { color: '#fde6ee' }, beginAtZero: true }
          }
        }
      });

      new Chart(graficoIdade.getContext('2d'), {
        type: 'bar',
        data: {
          labels: meses,
          datasets: [{
            label: 'Média de idade',
            data: mediaIdadeMes,
            borderColor: rosaEscuro,
            backgroundColor: 'rgba(255,130,159,0.12)',
            borderWidth: 3,
            tension: 0.3,
            pointRadius: 4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#444' }, grid: { display: false } },
            y: { ticks: { color: '#444' }, grid: { color: '#fde6ee' } }
          }
        }
      });
    };

  </script>

</body>

</html>